import { TrendingUp } from "lucide-react"
import { Area, AreaChart, CartesianGrid, XAxis } from "recharts"
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card"
import {
  ChartConfig,
  ChartContainer,
  ChartLegend,
  ChartLegendContent,
  ChartTooltip,
  ChartTooltipContent,
} from "@/components/ui/chart"
import { expenseInfo } from "@/pages/Dashboard"

interface info{
  expenses:expenseInfo;
  incomes:expenseInfo;
}

const chartData:[] = []
  const chartConfig = {
    desktop: {
      label: "Desktop",
      color: "hsl(var(--chart-1))",
    },
    mobile: {
      label: "Mobile",
      color: "hsl(var(--chart-2))",
    },
  } satisfies ChartConfig




const AreasChart:React.FC<info> = ({expenses,incomes}) => {
  const currentMonth = new Date().getMonth();

  const filteredExpenses = expenses.filter((expense:expenseInfo) => {
    const expenseYear = new Date(expense.date).getFullYear();
    return expenseYear === 2024;
  });

  // Group expenses by month and calculate total for each month
  const monthlyExpenses = filteredExpenses.reduce(
    (acc: { [key: number]: number }, expense) => {
      const expenseMonth = new Date(expense.date).getMonth(); // 0 for January, 11 for December

      acc[expenseMonth] = (acc[expenseMonth] || 0) + expense.amount;
      return acc;
    },
    {}
  );

  const months = [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December",
  ];
  for (let i = 0; i <= currentMonth; i++) {
    const desktopValue = monthlyExpenses[i] || 0;

    chartData.push({
      month: months[i],
      expense: desktopValue,
      income: desktopValue
    });
  }

    return (
        <Card>
          <CardHeader>
            <CardTitle>Area Chart - Legend</CardTitle>
            <CardDescription>
              Showing total visitors for the last 6 months
            </CardDescription>
          </CardHeader>
          <CardContent>
            <ChartContainer config={chartConfig}>
              <AreaChart
                accessibilityLayer
                data={chartData}
                margin={{
                  left: 12,
                  right: 12,
                }}
              >
                <CartesianGrid vertical={false} />
                <XAxis
                  dataKey="month"
                  tickLine={false}
                  axisLine={false}
                  tickMargin={8}
                  tickFormatter={(value) => value.slice(0, 3)}
                />
                <ChartTooltip
                  cursor={false}
                  content={<ChartTooltipContent indicator="line" />}
                />
                <Area
                  dataKey="mobile"
                  type="natural"
                  fill="var(--color-mobile)"
                  fillOpacity={0.4}
                  stroke="var(--color-mobile)"
                  stackId="a"
                />
                <Area
                  dataKey="desktop"
                  type="natural"
                  fill="var(--color-desktop)"
                  fillOpacity={0.4}
                  stroke="var(--color-desktop)"
                  stackId="a"
                />
                <ChartLegend content={<ChartLegendContent />} />
              </AreaChart>
            </ChartContainer>
          </CardContent>
          <CardFooter>
            <div className="flex w-full items-start gap-2 text-sm">
              <div className="grid gap-2">
                <div className="flex items-center gap-2 font-medium leading-none">
                  Trending up by 5.2% this month <TrendingUp className="h-4 w-4" />
                </div>
                <div className="flex items-center gap-2 leading-none text-muted-foreground">
                  January - June 2024
                </div>
              </div>
            </div>
          </CardFooter>
        </Card>
      )
}

export default AreasChart
